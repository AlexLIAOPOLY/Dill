<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>参数比较 - 模型计算工具</title>
    <!-- 引入Google字体 -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- 引入样式文件 -->
    <link rel="stylesheet" href="css/style.css?v=1.1">
    <link rel="stylesheet" href="css/animations.css?v=1.1">
    <link rel="stylesheet" href="css/popup-enhanced.css?v=1.0">
    <!-- 引入Font Awesome图标 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 引入Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-2.25.2.min.js"></script>
</head>
<body>
    <!-- 加载动画 -->
    <div id="loading" class="loading">
        <div class="spinner"></div>
    </div>
    
    <!-- 页头 -->
    <header>
        <div class="header-content">
            <div class="logo">Dill<span>模型</span>计算工具</div>
            <nav class="main-nav">
                <ul>
                    <li><a href="welcome.html">使用指南</a></li>
                    <li><a href="index.html">单一计算</a></li>
                    <li class="active"><a href="compare.html">参数比较</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <!-- 主要内容 -->
    <main class="main-content">
        <div class="container">
            <!-- 错误消息 -->
            <div id="error-message" class="error-message"></div>
            
            <!-- 参数集合区域 -->
            <section class="parameters-section">
                <h2 class="section-title">参数比较</h2>
                <p class="section-description">添加多组参数进行比较，观察不同参数对结果的影响</p>
                
                <button id="add-parameter-set-btn" class="add-parameter-set-btn">
                    <i class="fas fa-plus"></i> 添加参数组
                </button>
                
                <!-- 预设配置区域 -->
                <div class="preset-configurations">
                    <h4 class="preset-title">🚀 快速开始</h4>
                    <p class="preset-description">选择预设配置快速开始参数比较，探索不同参数对光刻胶形貌的影响</p>
                    <div class="preset-buttons">
                        <button id="preset-paper-config" class="preset-btn">
                            <i class="fas fa-play-circle"></i> 基础对比
                            <span class="preset-details">两组基础参数对比</span>
                        </button>
                        <button id="preset-contrast-study" class="preset-btn">
                            <i class="fas fa-adjust"></i> 对比度研究
                            <span class="preset-details">高对比度 vs 低对比度</span>
                        </button>
                        <button id="preset-exposure-study" class="preset-btn">
                            <i class="fas fa-clock"></i> 曝光时间研究
                            <span class="preset-details">短时间 vs 长时间曝光</span>
                        </button>
                    </div>
                </div>
                
                <div id="parameter-sets-container" class="parameter-sets-container">
                    <!-- 参数组1（默认） -->
                    <div class="parameter-set" data-set-id="1">
                        <div class="parameter-set-header">
                            <div class="parameter-set-title-container">
                                <h3 class="parameter-set-title">参数组 1</h3>
                                <input type="text" class="parameter-set-name-input" placeholder="自定义名称" title="输入自定义名称">
                            </div>
                            <div class="parameter-set-controls">
                                <button class="parameter-set-control-btn" title="复制参数组">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <!-- 第一个参数组不能删除 -->
                            </div>
                        </div>
                        
                        <div class="parameters-grid">
                            <!-- 参数1: I_avg -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name">平均入射光强度 (I<sub>avg</sub>)</span>
                                    <span class="parameter-value">10</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" class="slider I_avg" min="1" max="100" step="0.1" value="10">
                                    <input type="number" class="number-input" value="10" min="1" max="100" step="0.1">
                                </div>
                            </div>
                            
                            <!-- 参数2: V -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name">干涉条纹可见度 (V)</span>
                                    <span class="parameter-value">0.8</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" class="slider V" min="0" max="1" step="0.01" value="0.8">
                                    <input type="number" class="number-input" value="0.8" min="0" max="1" step="0.01">
                                </div>
                            </div>
                            
                            <!-- 参数3: K -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name">空间频率 (K)</span>
                                    <span class="parameter-value">2</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" class="slider K" min="0.1" max="10" step="0.1" value="2">
                                    <input type="number" class="number-input" value="2" min="0.1" max="10" step="0.1">
                                </div>
                            </div>
                            
                            <!-- 参数4: t_exp -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name">曝光时间 (t<sub>exp</sub>)</span>
                                    <span class="parameter-value">250</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" class="slider t_exp" min="1" max="3000" step="1" value="250">
                                    <input type="number" class="number-input" value="250" min="1" max="3000" step="1">
                                </div>
                                <div class="parameter-description">
                                    总曝光时间，单位：秒
                                </div>
                            </div>
                            
                            <!-- 参数5: C -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name">光敏速率常数 (C)</span>
                                    <span class="parameter-value">0.02</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" class="slider C" min="0.001" max="0.1" step="0.001" value="0.02">
                                    <input type="number" class="number-input" value="0.02" min="0.001" max="0.1" step="0.001">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 参数组2 (默认添加第二组参数) -->
                    <div class="parameter-set" data-set-id="2">
                        <div class="parameter-set-header">
                            <div class="parameter-set-title-container">
                                <h3 class="parameter-set-title">参数组 2</h3>
                                <input type="text" class="parameter-set-name-input" placeholder="自定义名称" title="输入自定义名称">
                            </div>
                            <div class="parameter-set-controls">
                                <button class="parameter-set-control-btn" title="复制参数组">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <button class="parameter-set-control-btn remove-set-btn" title="删除参数组">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="parameters-grid">
                            <!-- 参数1: I_avg -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name">平均入射光强度 (I<sub>avg</sub>)</span>
                                    <span class="parameter-value">20</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" class="slider I_avg" min="1" max="100" step="0.1" value="20">
                                    <input type="number" class="number-input" value="20" min="1" max="100" step="0.1">
                                </div>
                            </div>
                            
                            <!-- 参数2: V -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name">干涉条纹可见度 (V)</span>
                                    <span class="parameter-value">0.6</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" class="slider V" min="0" max="1" step="0.01" value="0.6">
                                    <input type="number" class="number-input" value="0.6" min="0" max="1" step="0.01">
                                </div>
                            </div>
                            
                            <!-- 参数3: K -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name">空间频率 (K)</span>
                                    <span class="parameter-value">3</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" class="slider K" min="0.1" max="10" step="0.1" value="3">
                                    <input type="number" class="number-input" value="3" min="0.1" max="10" step="0.1">
                                </div>
                            </div>
                            
                            <!-- 参数4: t_exp -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name">曝光时间 (t<sub>exp</sub>)</span>
                                    <span class="parameter-value">5</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" class="slider t_exp" min="0.1" max="20" step="0.1" value="5">
                                    <input type="number" class="number-input" value="5" min="0.1" max="20" step="0.1">
                                </div>
                                <div class="parameter-description">总曝光时间，单位：秒</div>
                            </div>
                            
                            <!-- 参数5: C -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name">光敏速率常数 (C)</span>
                                    <span class="parameter-value">0.02</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" class="slider C" min="0.001" max="0.1" step="0.001" value="0.02">
                                    <input type="number" class="number-input" value="0.02" min="0.001" max="0.1" step="0.001">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="button-container">
                    <button id="compare-btn" class="calculate-btn">比较</button>
                </div>
            </section>
            
            <!-- 比较结果展示区域 -->
            <section id="comparison-results-section" class="results-section">
                <div class="results-header">
                    <h2 class="section-title">比较结果</h2>
                    <div id="global-chart-controls" class="global-chart-controls">
                        <button id="global-distance-measure-btn" class="global-control-btn" title="在图表上点击两点以测量距离">物理测量</button>
                    </div>
                </div>
                
                <div class="comparison-results">
                    <!-- 曝光剂量分布比较 -->
                    <div class="comparison-plot-container">
                        <h3 class="comparison-plot-title">曝光剂量分布比较</h3>
                        <div id="exposure-comparison-plot-container" class="plot-container"></div>
                        <img id="exposure-comparison-plot" class="plot-image" style="display: none;" src="" alt="曝光剂量分布比较图">
                        
                        <div class="individual-threshold-controls threshold-analysis-hint" id="exposure-thresholds-container">
                            <div class="threshold-control" data-idx="0">
                                <span class="threshold-label-text">参数组 1 阈值:</span>
                                <input type="range" class="threshold-slider" min="10" max="200" step="1" value="80">
                                <span class="threshold-value-text">80 mJ/cm²</span>
                                <button class="toggle-threshold-visibility-btn">显示</button>
                            </div>
                            <div class="threshold-control" data-idx="1">
                                <span class="threshold-label-text">参数组 2 阈值:</span>
                                <input type="range" class="threshold-slider" min="10" max="200" step="1" value="100">
                                <span class="threshold-value-text">100 mJ/cm²</span>
                                <button class="toggle-threshold-visibility-btn">显示</button>
                            </div>
                            <div class="threshold-control" data-idx="2">
                                <span class="threshold-label-text">参数组 3 阈值:</span>
                                <input type="range" class="threshold-slider" min="10" max="200" step="1" value="120">
                                <span class="threshold-value-text">120 mJ/cm²</span>
                                <button class="toggle-threshold-visibility-btn">显示</button>
                            </div>
                            <div class="threshold-control" data-idx="3">
                                <span class="threshold-label-text">参数组 4 阈值:</span>
                                <input type="range" class="threshold-slider" min="10" max="200" step="1" value="90">
                                <span class="threshold-value-text">90 mJ/cm²</span>
                                <button class="toggle-threshold-visibility-btn">显示</button>
                            </div>
                        </div>

                        <div id="exposure-legend" class="comparison-legend">
                            <!-- 图例将由JavaScript动态生成 -->
                        </div>
                    </div>
                    
                    <!-- 光刻胶厚度分布比较 -->
                    <div class="comparison-plot-container">
                        <h3 class="comparison-plot-title">光刻胶厚度分布比较</h3>
                        <div id="thickness-comparison-plot-container" class="plot-container"></div>
                        <img id="thickness-comparison-plot" class="plot-image" style="display: none;" src="" alt="光刻胶厚度分布比较图">

                        <div class="individual-threshold-controls threshold-analysis-hint" id="thickness-thresholds-container">
                            <div class="threshold-control" data-idx="0">
                                <span class="threshold-label-text">参数组 1 阈值:</span>
                                <input type="range" class="threshold-slider" min="0" max="1" step="0.01" value="0.3">
                                <span class="threshold-value-text">0.3</span>
                                <button class="toggle-threshold-visibility-btn">显示</button>
                            </div>
                            <div class="threshold-control" data-idx="1">
                                <span class="threshold-label-text">参数组 2 阈值:</span>
                                <input type="range" class="threshold-slider" min="0" max="1" step="0.01" value="0.5">
                                <span class="threshold-value-text">0.5</span>
                                <button class="toggle-threshold-visibility-btn">显示</button>
                            </div>
                            <div class="threshold-control" data-idx="2">
                                <span class="threshold-label-text">参数组 3 阈值:</span>
                                <input type="range" class="threshold-slider" min="0" max="1" step="0.01" value="0.7">
                                <span class="threshold-value-text">0.7</span>
                                <button class="toggle-threshold-visibility-btn">显示</button>
                            </div>
                            <div class="threshold-control" data-idx="3">
                                <span class="threshold-label-text">参数组 4 阈值:</span>
                                <input type="range" class="threshold-slider" min="0" max="1" step="0.01" value="0.4">
                                <span class="threshold-value-text">0.4</span>
                                <button class="toggle-threshold-visibility-btn">显示</button>
                            </div>
                        </div>

                        <div id="thickness-legend" class="comparison-legend">
                            <!-- 图例将由JavaScript动态生成 -->
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>
    
    <!-- 页脚 -->
    <footer>
        <div class="footer-content">
            <p>&copy; 2025 香港大学. 版权所有.</p>
        </div>
    </footer>
    
    <!-- 参数组模板（隐藏，用于JavaScript克隆） -->
    <template id="parameter-set-template">
        <div class="parameter-set" data-set-id="">
            <div class="parameter-set-header">
                <div class="parameter-set-title-container">
                    <h3 class="parameter-set-title">参数组</h3>
                    <input type="text" class="parameter-set-name-input" placeholder="自定义名称" title="输入自定义名称">
                </div>
                <div class="parameter-set-controls">
                    <button class="parameter-set-control-btn" title="复制参数组">
                        <i class="fas fa-copy"></i>
                    </button>
                    <button class="parameter-set-control-btn remove-set-btn" title="删除参数组">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
            
            <div class="parameters-grid">
                <!-- 参数1: I_avg -->
                <div class="parameter-item">
                    <div class="parameter-label">
                        <span class="parameter-name">平均入射光强度 (I<sub>avg</sub>)</span>
                        <span class="parameter-value">10</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="slider I_avg" min="1" max="100" step="0.1" value="10">
                        <input type="number" class="number-input" value="10" min="1" max="100" step="0.1">
                    </div>
                </div>
                
                <!-- 参数2: V -->
                <div class="parameter-item">
                    <div class="parameter-label">
                        <span class="parameter-name">干涉条纹可见度 (V)</span>
                        <span class="parameter-value">0.8</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="slider V" min="0" max="1" step="0.01" value="0.8">
                        <input type="number" class="number-input" value="0.8" min="0" max="1" step="0.01">
                    </div>
                </div>
                
                <!-- 参数3: K -->
                <div class="parameter-item">
                    <div class="parameter-label">
                        <span class="parameter-name">空间频率 (K)</span>
                        <span class="parameter-value">2</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="slider K" min="0.1" max="10" step="0.1" value="2">
                        <input type="number" class="number-input" value="2" min="0.1" max="10" step="0.1">
                    </div>
                </div>
                
                <!-- 参数4: t_exp -->
                <div class="parameter-item">
                    <div class="parameter-label">
                        <span class="parameter-name">曝光时间 (t<sub>exp</sub>)</span>
                        <span class="parameter-value">5</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="slider t_exp" min="0.1" max="20" step="0.1" value="5">
                        <input type="number" class="number-input" value="5" min="0.1" max="20" step="0.1">
                    </div>
                </div>
                
                <!-- 参数5: C -->
                <div class="parameter-item">
                    <div class="parameter-label">
                        <span class="parameter-name">光敏速率常数 (C)</span>
                        <span class="parameter-value">0.02</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="slider C" min="0.001" max="0.1" step="0.001" value="0.02">
                        <input type="number" class="number-input" value="0.02" min="0.001" max="0.1" step="0.001">
                    </div>
                </div>
            </div>
        </div>
    </template>
    
    <!-- 引入JavaScript文件 -->
    <script src="js/common.js?v=1.0"></script>
    <script src="js/compare.js"></script>
</body>
</html> 