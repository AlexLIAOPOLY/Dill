<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="title">参数比较 - 多模型光刻胶计算工具</title>
    <!-- 引入Google字体 -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- 引入样式文件 -->
    <link rel="stylesheet" href="css/style.css?v=1.1">
    <link rel="stylesheet" href="css/animations.css?v=1.1">
    <link rel="stylesheet" href="css/popup-enhanced.css?v=1.0">
    <link rel="stylesheet" href="css/loading-animation.css">
    <link rel="stylesheet" href="css/theme-colors.css?v=1.0">
    <link rel="stylesheet" href="css/professional-header-footer.css?v=1.1">
    <!-- 引入Font Awesome图标 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 引入Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-2.25.2.min.js"></script>
    
    <!-- 引入系统化日志管理 -->
    <script src="js/systematic-logs.js?v=1.0"></script>
</head>
<body>
    <!-- 加载动画 -->
    <div id="loading" class="loading">
        <!-- 加载页面右上角日志按钮 -->
        <div class="loading-controls">
            <button id="loading-logs-btn" class="loading-logs-btn" title="查看计算进度" data-i18n-title="loading_logs_title">
                <i class="fas fa-file-alt"></i>
                <span class="loading-logs-text" data-i18n="loading_logs">计算日志</span>
            </button>
        </div>
        
        <!-- 加载期间的日志显示面板 -->
        <div id="loading-logs-panel" class="loading-logs-panel">
            <div class="loading-logs-header">
                <h4 class="loading-logs-title">
                    <i class="fas fa-code"></i>
                    <span data-i18n="loading_logs_title_text">实时计算日志</span>
                </h4>
                <div class="loading-logs-controls">
                    <button id="loading-logs-minimize" class="loading-logs-control-btn" title="最小化">
                        <i class="fas fa-minus"></i>
                    </button>
                    <button id="loading-logs-close" class="loading-logs-control-btn" title="关闭">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="loading-logs-content">
                <div class="loading-logs-stats">
                    <div class="loading-stat">
                        <span class="stat-label" data-i18n="loading_stat_progress">进度:</span>
                        <span id="loading-progress-text" class="stat-value">等待开始...</span>
                    </div>
                    <div class="loading-stat">
                        <span class="stat-label" data-i18n="loading_stat_time">用时:</span>
                        <span id="loading-time-text" class="stat-value">-</span>
                    </div>
                </div>
                <div id="loading-logs-container" class="loading-logs-list">
                    <div class="loading-logs-placeholder">
                        <i class="fas fa-info-circle"></i>
                        <span data-i18n="loading_logs_placeholder">计算开始后将显示详细日志...</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="loader-container">
            <!-- 多层旋转环 -->
            <div class="spinner-ring"></div>
            <div class="spinner-ring"></div>
            <div class="spinner-ring"></div>
            
            <!-- 中心圆点 -->
            <div class="spinner-core"></div>
            
            <!-- 波浪效果 -->
            <div class="wave"></div>
            <div class="wave"></div>
            <div class="wave"></div>
            
            <!-- 粒子效果 -->
            <div class="particles">
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
            </div>
            
            <!-- 分子路径 -->
            <div class="molecule-path">
                <div class="path"><div class="molecule"></div></div>
                <div class="path"><div class="molecule"></div></div>
                <div class="path"><div class="molecule"></div></div>
                <div class="path"><div class="molecule"></div></div>
            </div>
        </div>
        <div class="loading-text" data-i18n="loading">加载中...</div>
    </div>
    
    <!-- 页头 -->
    <header class="professional-header">
        <div class="header-main">
            <div class="header-content">
                <div class="brand-section">
                    <div class="logo-container">
                        <div class="logo-images">
                            <img src="assets/images/LOGO.avif" alt="香港大学校徽" class="university-logo" title="香港大学">
                        </div>
                        <div class="logo-text">
                            <div class="logo-title" data-i18n="logo_title">
                                <span class="logo-highlight">多模型</span>光刻胶计算平台
                            </div>
                            <div class="logo-subtitle" data-i18n="logo_subtitle">Multi-Model Photoresist Simulation Platform</div>
                        </div>
                    </div>
                </div>
                <nav class="main-nav">
                    <ul class="nav-menu">
                        <li class="nav-item">
                            <a href="index.html" class="nav-link" data-i18n="nav_single">
                                <i class="fas fa-calculator"></i>
                                <span>单一计算</span>
                            </a>
                        </li>
                        <li class="nav-item active">
                            <a href="compare.html" class="nav-link" data-i18n="nav_compare">
                                <i class="fas fa-chart-line"></i>
                                <span>参数比较</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="../matrix_visualization/" class="nav-link" data-i18n="nav_matrix">
                                <i class="fas fa-cube"></i>
                                <span>模型矩阵可视化</span>
                            </a>
                        </li>
                    </ul>
                </nav>
                <div class="header-utilities">
                    <div class="lang-switcher">
                        <select id="lang-select" class="lang-select" title="选择语言 / Select Language" aria-label="选择语言">
                            <option value="zh-CN">中文</option>
                            <option value="en">English</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- 主要内容 -->
    <main class="main-content">
        <div class="container">
            <!-- 错误消息 -->
            <div id="error-message" class="error-message" data-i18n="error_message"></div>
            
            <!-- 模型选择与公式展示区域 -->
            <section id="model-selection-section" class="model-selection-section">
                <h2 class="section-title" data-i18n="model_section_title">模型选择与说明</h2>
                <div class="model-selector-container">
                    <label for="model-select" class="model-select-label" data-i18n="select_model">选择计算模型:</label>
                    <select id="model-select" class="model-select">
                        <option value="dill" selected data-i18n="dill_model">Dill模型（薄胶）</option>
                        <option value="enhanced_dill" data-i18n="enhanced_dill_model">增强Dill模型（厚胶）</option>
                        <option value="car" data-i18n="car_model">CAR模型（化学放大型光刻胶）</option>
                    </select>
                </div>

                <div id="model-description-container" class="model-description-container">
                    <div id="dill-desc" class="model-card" style="display:block;">
                        <h3 class="model-description-title">
                            <i class="fas fa-microscope"></i>
                            <span data-i18n="dill_formula_title">Dill模型</span>
                        </h3>
                        <div class="model-core-formula" data-i18n="dill_formula_core">核心关系: <code>M(x,z) = e<sup>-C · D(x,z)</sup></code></div>
                        <p class="formula-notation" data-i18n="dill_formula_note"><em>M: 归一化光敏剂浓度, C: 光敏速率常数, D: 曝光剂量</em></p>
                        <div class="model-math"></div>
                        <div class="model-ref"></div>
                        <button id="dill-toggle-details" class="toggle-details-btn" data-i18n="btn_expand">展开更多 <i class="fas fa-chevron-down"></i></button>
                        <div id="dill-full-details" class="model-full-details" style="margin-bottom:0;padding-bottom:0;">
                            <h4 data-i18n="dill_formula_ode">微分方程</h4>
                            <code style="display:block;margin-bottom:10px;" data-i18n="dill_formula_ode_code">∂M/∂t = -C·I·M</code>
                            <div style="color:#34495e;font-size:0.98rem;margin-bottom:12px;" data-i18n="dill_formula_ref">参考：Dill F H, Neureuther A R, Tuttle J A, et al. IEEE Trans Electron Devices, 1975.</div>
                            <h4 data-i18n="dill_formula_scope">Dill模型主要适用于薄胶层（< 3μm）的光刻胶曝光过程建模，其中光的穿透性较好，光强分布较为均匀。</h4>
                            <h4 data-i18n="dill_formula_math">完整的Dill模型包括三个关键参数A、B、C：</h4>
                            <ul>
                                <li data-i18n="dill_formula_math_A"><b>参数A</b>：表示光敏剂对光的吸收率</li>
                                <li data-i18n="dill_formula_math_B"><b>参数B</b>：表示基底对光的吸收率</li>
                                <li data-i18n="dill_formula_math_C"><b>参数C</b>：表示光敏剂对光的反应速率</li>
                            </ul>
                            <p data-i18n="dill_formula_simple">在本工具的简化模型中，主要使用参数C来表征光刻胶的曝光特性。</p>
                            <h4 data-i18n="dill_formula_detail">核心公式详解</h4>
                            <div class="formula-details-card inner-formula-card">
                                <div class="formula-card-body">
                                    <div class="formula-large" data-i18n="dill_formula_core"><code>M(x,z) = e<sup>-C · D(x,z)</sup></code></div>
                                    <div class="formula-description">
                                        <div class="formula-param" data-i18n="dill_formula_param_M"><span class="param-name" data-i18n="avg_intensity">M(x,z):</span> <span class="param-desc">位置(x,z)处的归一化光敏剂浓度，M=1表示未曝光区域，M=0表示完全曝光区域</span></div>
                                        <div class="formula-param" data-i18n="dill_formula_param_C"><span class="param-name" data-i18n="dill_C">C:</span> <span class="param-desc">光敏速率常数，表示光刻胶对光的敏感程度，单位: cm²/mJ</span></div>
                                        <div class="formula-param" data-i18n="dill_formula_param_D"><span class="param-name" data-i18n="spatial_freq">D(x,z):</span> <span class="param-desc">位置(x,z)处的曝光剂量，单位: mJ/cm²</span></div>
                                    </div>
                                    <div class="formula-derivation">
                                        <h4 data-i18n="dill_formula_ode2">微分方程形式</h4>
                                        <code data-i18n="dill_formula_ode2_code">∂M/∂t = -C · I · M</code>
                                        <p data-i18n="dill_formula_ode2_note">其中I为光强度，表示单位时间内的曝光剂量。</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="enhanced-dill-desc" class="model-card" style="display:none;">
                        <h3 class="model-description-title">
                            <i class="fas fa-layer-group"></i>
                            <span data-i18n="enhanced_formula_title">增强Dill模型（厚胶）</span>
                        </h3>
                        <div class="model-core-formula" data-i18n="enhanced_formula_core">核心关系: <code>
                            <div class="fraction">
                                <span class="numerator">∂I</span>
                                <span class="denominator">∂z</span>
                            </div>
                            = -I · [A(z<sub>h</sub>,T,t<sub>B</sub>) · M + B(z<sub>h</sub>,T,t<sub>B</sub>)]
                        </code></div>
                        <p class="formula-notation" data-i18n="enhanced_formula_note"><em>A: 光敏剂吸收率, B: 基底吸收率, M: 归一化光敏剂浓度</em></p>
                        <p data-i18n="enhanced_formula_core2"><code>
                            <div class="fraction">
                                <span class="numerator">∂M</span>
                                <span class="denominator">∂t</span>
                            </div>
                            = -I · M · C(z<sub>h</sub>,T,t<sub>B</sub>)
                        </code></p>
                        <div class="model-math"></div>
                        <div class="model-ref"></div>
                        <button id="enhanced-dill-toggle-details" class="toggle-details-btn" data-i18n="btn_expand">展开更多 <i class="fas fa-chevron-down"></i></button>
                        <div id="enhanced-dill-full-details" class="model-full-details" style="margin-bottom:0;padding-bottom:0;">
                            <h4 data-i18n="enhanced_formula_ode">微分方程</h4>
                            <code style="display:block;margin-bottom:10px;" data-i18n="enhanced_formula_ode_code">∂I/∂z = -I·[A(z<sub>h</sub>,T,t<sub>B</sub>)·M+B(z<sub>h</sub>,T,t<sub>B</sub>)]<br>∂M/∂t = -I·M·C(z<sub>h</sub>,T,t<sub>B</sub>)</code>
                            <div style="color:#34495e;font-size:0.98rem;margin-bottom:12px;" data-i18n="enhanced_formula_ref">参考：刘世杰等《厚层抗蚀剂曝光模型及其参数测量》, 2005.</div>
                            <h4 data-i18n="enhanced_formula_scope">该模型特别适用于厚胶层（> 5μm）光刻胶，其中光的穿透性受到明显影响，光强随深度衰减较为显著。</h4>
                            <h4 data-i18n="enhanced_formula_fit">参数拟合</h4>
                            <p data-i18n="enhanced_formula_fit_math">根据刘世杰等的研究，A/B/C参数可以通过以下形式表示：</p>
                            <ul>
                                <li data-i18n="enhanced_formula_fit_A">A(z<sub>h</sub>,T,t<sub>B</sub>) = a₀ + a₁·z<sub>h</sub> + a₂·T + a₃·z<sub>h</sub>² + a₄·z<sub>h</sub>·T + a₅·T²</li>
                                <li data-i18n="enhanced_formula_fit_B">B(z<sub>h</sub>,T,t<sub>B</sub>) = b₀ + b₁·z<sub>h</sub> + b₂·T</li>
                                <li data-i18n="enhanced_formula_fit_C">C(z<sub>h</sub>,T,t<sub>B</sub>) = c₀ + c₁·z<sub>h</sub> + c₂·T + c₃·z<sub>h</sub>²</li>
                            </ul>
                            <p data-i18n="enhanced_formula_fit_note">其中参数a₀~a₅, b₀~b₂, c₀~c₃由实验数据拟合得到。</p>
                            <h4 data-i18n="enhanced_formula_detail">核心公式详解</h4>
                            <div class="formula-details-card inner-formula-card">
                                <div class="formula-card-body">
                                    <div class="formula-large" data-i18n="enhanced_formula_core">∂I/∂z = -I·[A(z<sub>h</sub>,T,t<sub>B</sub>)·M+B(z<sub>h</sub>,T,t<sub>B</sub>)]</div>
                                    <div class="formula-large" data-i18n="enhanced_formula_core2"><code>∂M/∂t = -I·M·C(z<sub>h</sub>,T,t<sub>B</sub>)</code></div>
                                    <div class="formula-description">
                                        <div class="formula-param" data-i18n="enhanced_formula_param_I"><span class="param-name" data-i18n="avg_intensity">I:</span> <span class="param-desc">光强度，随深度z变化</span></div>
                                        <div class="formula-param" data-i18n="enhanced_formula_param_M"><span class="param-name" data-i18n="avg_intensity">M:</span> <span class="param-desc">归一化光敏剂浓度</span></div>
                                        <div class="formula-param" data-i18n="enhanced_formula_param_A"><span class="param-name" data-i18n="spatial_freq">A(z<sub>h</sub>,T,t<sub>B</sub>):</span> <span class="param-desc">光敏剂吸收率，与胶厚、前烘温度、前烘时间相关</span></div>
                                        <div class="formula-param" data-i18n="enhanced_formula_param_B"><span class="param-name" data-i18n="spatial_freq">B(z<sub>h</sub>,T,t<sub>B</sub>):</span> <span class="param-desc">基底吸收率，与胶厚、前烘温度、前烘时间相关</span></div>
                                        <div class="formula-param" data-i18n="enhanced_formula_param_C"><span class="param-name" data-i18n="dill_C">C(z<sub>h</sub>,T,t<sub>B</sub>):</span> <span class="param-desc">光敏速率常数，与胶厚、前烘温度、前烘时间相关</span></div>
                                    </div>
                                    <div class="formula-derivation">
                                        <h4 data-i18n="enhanced_formula_fit_detail">参数拟合公式</h4>
                                        <p data-i18n="enhanced_formula_fit_desc">A、B、C参数通过多项式函数拟合实验数据：</p>
                                        <code data-i18n="enhanced_formula_fit_A">A(z<sub>h</sub>,T,t<sub>B</sub>) = a₀ + a₁·z<sub>h</sub> + a₂·T + a₃·z<sub>h</sub>² + a₄·z<sub>h</sub>·T + a₅·T²</code><br>
                                        <code data-i18n="enhanced_formula_fit_B">B(z<sub>h</sub>,T,t<sub>B</sub>) = b₀ + b₁·z<sub>h</sub> + b₂·T</code><br>
                                        <code data-i18n="enhanced_formula_fit_C">C(z<sub>h</sub>,T,t<sub>B</sub>) = c₀ + c₁·z<sub>h</sub> + c₂·T + c₃·z<sub>h</sub>²</code>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="car-desc" class="model-card" style="display:none;">
                        <h3 class="model-description-title">
                            <i class="fas fa-flask"></i>
                            <span data-i18n="car_formula_title">CAR模型（化学放大型光刻胶）</span>
                        </h3>
                        <div class="model-core-formula" data-i18n="car_formula_core">核心关系: <code>[H<sup>+</sup>] = η · D(x)</code></div>
                        <p class="formula-notation" data-i18n="car_formula_note"><em>η: 光酸产生效率, D: 曝光剂量, [H<sup>+</sup>]: 光酸浓度</em></p>
                        <div class="model-math"></div>
                        <div class="model-ref"></div>
                        <button id="car-toggle-details" class="toggle-details-btn" data-i18n="btn_expand">展开更多 <i class="fas fa-chevron-down"></i></button>
                        <div id="car-full-details" class="model-full-details" style="margin-bottom:0;padding-bottom:0;">
                            <h4 data-i18n="car_formula_ode">关键方程</h4>
                            <code style="display:block;margin-bottom:10px;" data-i18n="car_formula_ode_code">[H⁺] = η·D(x)<br>D(x,t) = I(x)·t<br>扩散: [H⁺]<sub>diff</sub> = G([H⁺], l<sub>diff</sub>)<br>脱保护度: M = 1-exp(-k·[H⁺]<sub>diff</sub>·A)</code>
                            <div style="color:#34495e;font-size:0.98rem;margin-bottom:12px;" data-i18n="car_formula_ref">参考：Hinsberg et al., "Chemical amplification mechanism", Proc. SPIE, 1994.</div>
                            <h4 data-i18n="car_formula_scope">该模型特别适用于DUV (深紫外)光刻胶，其中一个光子可以通过光酸催化机制引发多次化学反应。</h4>
                            <h4 data-i18n="car_formula_math">CAR模型的四个关键步骤：</h4>
                            <ul>
                                <li data-i18n="car_formula_math_A"><b>光酸生成</b>：曝光产生初始光酸分布，与曝光剂量和量子效率有关</li>
                                <li data-i18n="car_formula_math_B"><b>光酸扩散</b>：后烘过程中光酸分子扩散，使空间分布变得平滑</li>
                                <li data-i18n="car_formula_math_C"><b>催化反应</b>：每个光酸分子可催化多个保护基团脱离，实现化学放大</li>
                                <li data-i18n="car_formula_math_D"><b>显影过程</b>：脱保护区域可被显影液溶解，形成图案</li>
                            </ul>
                            <p data-i18n="car_formula_simple">本模型关注放大效应、对比度和分辨率之间的关系。</p>
                            <h4 data-i18n="car_formula_detail">核心公式详解</h4>
                            <div class="formula-details-card inner-formula-card">
                                <div class="formula-card-body">
                                    <div class="formula-large" data-i18n="car_formula_acid"><code>[H⁺] = η·D(x) = η·I(x)·t<sub>exp</sub></code></div>
                                    <div class="formula-large" data-i18n="car_formula_deprotect"><code>M = 1-exp(-k·[H⁺]<sub>diff</sub>·A)</code></div>
                                    <div class="formula-description">
                                        <div class="formula-param" data-i18n="car_formula_param_H"><span class="param-name" data-i18n="avg_intensity">[H⁺]:</span> <span class="param-desc">光酸浓度，与曝光剂量成正比</span></div>
                                        <div class="formula-param" data-i18n="car_formula_param_eta"><span class="param-name" data-i18n="car_acid_gen_efficiency">η:</span> <span class="param-desc">光酸产生效率，反映光子到光酸分子的转化效率</span></div>
                                        <div class="formula-param" data-i18n="car_formula_param_diff"><span class="param-name" data-i18n="car_diffusion_length">[H⁺]<sub>diff</sub>:</span> <span class="param-desc">经过扩散后的光酸浓度分布</span></div>
                                        <div class="formula-param" data-i18n="car_formula_param_k"><span class="param-name" data-i18n="car_reaction_rate">k:</span> <span class="param-desc">反应速率常数，表征催化反应效率</span></div>
                                        <div class="formula-param" data-i18n="car_formula_param_A"><span class="param-name" data-i18n="car_amplification">A:</span> <span class="param-desc">放大因子，表示每个光酸分子可以催化的反应数量</span></div>
                                        <div class="formula-param" data-i18n="car_formula_param_M"><span class="param-name" data-i18n="avg_intensity">M:</span> <span class="param-desc">树脂脱保护程度，影响显影后的溶解速率</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- 参数集合区域 -->
            <section class="parameters-section">
                <h2 class="section-title" data-i18n="compare_param_section">参数比较</h2>
                <p class="section-description" data-i18n="compare_param_desc">添加多组参数进行比较，观察不同参数对结果的影响</p>
                
                <button id="add-parameter-set-btn" class="add-parameter-set-btn" data-i18n="compare_add_set">
                    <i class="fas fa-plus"></i> 添加参数组
                </button>
                
                <!-- 预设配置区域 -->
                <!-- 注释掉快速开始部分，保留但不显示
                <div class="preset-configurations">
                    <h4 class="preset-title" data-i18n="compare_preset_title">🚀 快速开始</h4>
                    <p class="preset-description" data-i18n="compare_preset_desc">选择预设配置快速开始参数比较，探索不同参数对光刻胶形貌的影响</p>
                    <div class="preset-buttons">
                        <button id="preset-paper-config" class="preset-btn" data-i18n="compare_preset_btn1">
                            <i class="fas fa-play-circle"></i> 基础对比
                            <span class="preset-details" data-i18n="compare_preset_btn1_tip">两组基础参数对比</span>
                        </button>
                        <button id="preset-contrast-study" class="preset-btn" data-i18n="compare_preset_btn2">
                            <i class="fas fa-adjust"></i> 对比度研究
                            <span class="preset-details" data-i18n="compare_preset_btn2_tip">高对比度 vs 低对比度</span>
                        </button>
                        <button id="preset-exposure-study" class="preset-btn" data-i18n="compare_preset_btn3">
                            <i class="fas fa-clock"></i> 曝光时间研究
                            <span class="preset-details" data-i18n="compare_preset_btn3_tip">短时间 vs 长时间曝光</span>
                        </button>
                    </div>
                </div>
                -->
                
                <div id="parameter-sets-container" class="parameter-sets-container">
                    <!-- 参数组1（默认） -->
                    <div class="parameter-set" data-set-id="1">
                        <div class="parameter-set-header sticky">
                            <button class="drag-handle-btn" data-i18n-title="drag_handle_title" aria-label="拖拽排序"><i class="fas fa-grip-lines"></i></button>
                            <button class="collapse-set-btn" aria-label="折叠/展开" data-i18n-title="collapse_set_title"><i class="fas fa-chevron-down"></i></button>
                            <div class="parameter-set-title-container">
                                <h3 class="parameter-set-title">参数组 1</h3>
                                <input type="text" class="parameter-set-name-input" placeholder="自定义名称" title="输入自定义名称" data-i18n="compare_set_placeholder" data-i18n-title="compare_set_placeholder_title">
                            </div>
                            <div class="parameter-set-controls">
                                <button class="parameter-set-control-btn" title="复制参数组" data-i18n-title="copy_set_title"><i class="fas fa-copy"></i></button>
                                <!-- 第一个参数组不能删除 -->
                            </div>
                        </div>
                        
                        <div class="parameters-grid">
                            <!-- 参数1: I_avg -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name" data-i18n="avg_intensity">平均入射光强度 (I<sub>avg</sub>)</span>
                                    <span class="parameter-value">10</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" class="slider I_avg" min="1" max="100" step="0.1" value="10" title="平均入射光强度滑块" aria-label="平均入射光强度">
                                    <input type="number" class="number-input" value="10" min="1" max="100" step="0.1" title="平均入射光强度数值输入" aria-label="平均入射光强度数值">
                                </div>
                                <div class="parameter-description" data-i18n="param_desc_I_avg"></div>
                            </div>
                            
                            <!-- 参数2: V -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name" data-i18n="fringe_visibility">干涉条纹可见度 (V)</span>
                                    <span class="parameter-value">0.8</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" class="slider V" min="0" max="1" step="0.01" value="0.8" title="干涉条纹可见度滑块" aria-label="干涉条纹可见度">
                                    <input type="number" class="number-input" value="0.8" min="0" max="1" step="0.01" title="干涉条纹可见度数值输入" aria-label="干涉条纹可见度数值">
                                </div>
                                <div class="parameter-description" data-i18n="param_desc_V"></div>
                            </div>
                            
                            <!-- 参数3: K -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name" data-i18n="spatial_freq">空间频率 (K)</span>
                                    <span class="parameter-value">2</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" class="slider K" min="0.1" max="10" step="0.1" value="2" title="空间频率滑块" aria-label="空间频率">
                                    <input type="number" class="number-input" value="2" min="0.1" max="10" step="0.1" title="空间频率数值输入" aria-label="空间频率数值">
                                </div>
                                <div class="parameter-description" data-i18n="param_desc_K"></div>
                            </div>
                            
                            <!-- 参数4: t_exp -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name" data-i18n="exposure_time">曝光时间 (t<sub>exp</sub>, s)</span>
                                    <span class="parameter-value">5</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" class="slider t_exp" min="0.1" max="20" step="0.1" value="5" title="曝光时间滑块" aria-label="曝光时间">
                                    <input type="number" class="number-input" value="5" min="0.1" max="20" step="0.1" title="曝光时间数值输入" aria-label="曝光时间数值">
                                </div>
                                <div class="parameter-description" data-i18n="param_desc_t_exp">曝光时间，单位：秒</div>
                            </div>
                            
                            <!-- 参数5: C -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name" data-i18n="dill_C">光敏速率常数 (C)</span>
                                    <span class="parameter-value">0.02</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" class="slider C" min="0.001" max="0.1" step="0.001" value="0.02" title="光敏速率常数滑块" aria-label="光敏速率常数">
                                    <input type="number" class="number-input" value="0.02" min="0.001" max="0.1" step="0.001" title="光敏速率常数数值输入" aria-label="光敏速率常数数值">
                                </div>
                                <div class="parameter-description" data-i18n="param_desc_C"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 参数组2 (默认添加第二组参数) -->
                    <div class="parameter-set" data-set-id="2">
                        <div class="parameter-set-header sticky">
                            <button class="drag-handle-btn" data-i18n-title="drag_handle_title" aria-label="拖拽排序"><i class="fas fa-grip-lines"></i></button>
                            <button class="collapse-set-btn" aria-label="折叠/展开" data-i18n-title="collapse_set_title"><i class="fas fa-chevron-down"></i></button>
                            <div class="parameter-set-title-container">
                                <h3 class="parameter-set-title">参数组 2</h3>
                                <input type="text" class="parameter-set-name-input" placeholder="自定义名称" title="输入自定义名称" data-i18n="compare_set_placeholder" data-i18n-title="compare_set_placeholder_title">
                            </div>
                            <div class="parameter-set-controls">
                                <button class="parameter-set-control-btn" title="复制参数组" data-i18n-title="copy_set_title"><i class="fas fa-copy"></i></button>
                                <button class="parameter-set-control-btn remove-set-btn" title="删除参数组" data-i18n-title="remove_set_title"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        
                        <div class="parameters-grid">
                            <!-- 参数1: I_avg -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name" data-i18n="avg_intensity">平均入射光强度 (I<sub>avg</sub>)</span>
                                    <span class="parameter-value">20</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" class="slider I_avg" min="1" max="100" step="0.1" value="20" title="平均入射光强度滑块2" aria-label="平均入射光强度2">
                                    <input type="number" class="number-input" value="20" min="1" max="100" step="0.1" title="平均入射光强度数值输入2" aria-label="平均入射光强度数值2">
                                </div>
                            </div>
                            
                            <!-- 参数2: V -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name" data-i18n="fringe_visibility">干涉条纹可见度 (V)</span>
                                    <span class="parameter-value">0.6</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" class="slider V" min="0" max="1" step="0.01" value="0.6" title="干涉条纹可见度滑块2" aria-label="干涉条纹可见度2">
                                    <input type="number" class="number-input" value="0.6" min="0" max="1" step="0.01" title="干涉条纹可见度数值输入2" aria-label="干涉条纹可见度数值2">
                                </div>
                            </div>
                            
                            <!-- 参数3: K -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name" data-i18n="spatial_freq">空间频率 (K)</span>
                                    <span class="parameter-value">3</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" class="slider K" min="0.1" max="10" step="0.1" value="3" title="空间频率滑块2" aria-label="空间频率2">
                                    <input type="number" class="number-input" value="3" min="0.1" max="10" step="0.1" title="空间频率数值输入2" aria-label="空间频率数值2">
                                </div>
                            </div>
                            
                            <!-- 参数4: t_exp -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name" data-i18n="exposure_time">曝光时间 (t<sub>exp</sub>, s)</span>
                                    <span class="parameter-value">8</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" class="slider t_exp" min="0.1" max="20" step="0.1" value="8" title="曝光时间滑块2" aria-label="曝光时间2">
                                    <input type="number" class="number-input" value="8" min="0.1" max="20" step="0.1" title="曝光时间数值输入2" aria-label="曝光时间数值2">
                                </div>
                                <div class="parameter-description" data-i18n="param_desc_t_exp">曝光时间，单位：秒</div>
                            </div>
                            
                            <!-- 参数5: C -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name" data-i18n="dill_C">光敏速率常数 (C)</span>
                                    <span class="parameter-value">0.02</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" class="slider C" min="0.001" max="0.1" step="0.001" value="0.02" title="光敏速率常数滑块2" aria-label="光敏速率常数2">
                                    <input type="number" class="number-input" value="0.02" min="0.001" max="0.1" step="0.001" title="光敏速率常数数值输入2" aria-label="光敏速率常数数值2">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="button-container">
                    <button id="compare-btn" class="calculate-btn" data-i18n="compare_btn">比较</button>
                </div>
            </section>
            
            <!-- 比较结果展示区域 -->
            <section id="comparison-results-section" class="results-section">
                <div class="results-header">
                    <h2 class="section-title" data-i18n="compare_result_title">比较结果</h2>
                    <div id="global-chart-controls" class="global-chart-controls">
                        <button id="global-distance-measure-btn" class="global-control-btn" title="在图表上点击两点以测量距离" data-i18n="compare_measure">物理测量</button>
                        <button id="view-logs-btn" class="global-control-btn" title="查看计算日志" data-i18n="view_logs">
                            <i class="fas fa-file-alt"></i> 运行日志
                        </button>
                    </div>
                </div>
                
                <div class="comparison-results">
                    <!-- 曝光剂量分布比较 -->
                    <div class="comparison-plot-container">
                        <h3 class="comparison-plot-title" data-i18n="compare_exp_dist">曝光剂量分布比较</h3>
                        <div id="exposure-comparison-plot-container" class="plot-container"></div>
                        <img id="exposure-comparison-plot" class="plot-image" style="display: none;" src="" alt="曝光剂量分布比较图">
                        
                        <div class="individual-threshold-controls threshold-analysis-hint" id="exposure-thresholds-container">
                            <div class="threshold-control" data-idx="0">
                                <span class="threshold-label-text" data-i18n="compare_threshold">参数组 1 阈值:</span>
                                <input type="range" class="threshold-slider" min="10" max="200" step="1" value="80" title="参数组1阈值滑块" aria-label="参数组1阈值">
                                <span class="threshold-value-text">80 mJ/cm²</span>
                                <button class="toggle-threshold-visibility-btn" data-i18n="compare_show">显示</button>
                            </div>
                            <div class="threshold-control" data-idx="1">
                                <span class="threshold-label-text" data-i18n="compare_threshold">参数组 2 阈值:</span>
                                <input type="range" class="threshold-slider" min="10" max="200" step="1" value="100" title="参数组2阈值滑块" aria-label="参数组2阈值">
                                <span class="threshold-value-text">100 mJ/cm²</span>
                                <button class="toggle-threshold-visibility-btn" data-i18n="compare_show">显示</button>
                            </div>
                            <div class="threshold-control" data-idx="2">
                                <span class="threshold-label-text" data-i18n="compare_threshold">参数组 3 阈值:</span>
                                <input type="range" class="threshold-slider" min="10" max="200" step="1" value="120" title="参数组3阈值滑块" aria-label="参数组3阈值">
                                <span class="threshold-value-text">120 mJ/cm²</span>
                                <button class="toggle-threshold-visibility-btn" data-i18n="compare_show">显示</button>
                            </div>
                            <div class="threshold-control" data-idx="3">
                                <span class="threshold-label-text" data-i18n="compare_threshold">参数组 4 阈值:</span>
                                <input type="range" class="threshold-slider" min="10" max="200" step="1" value="90" title="参数组4阈值滑块" aria-label="参数组4阈值">
                                <span class="threshold-value-text">90 mJ/cm²</span>
                                <button class="toggle-threshold-visibility-btn" data-i18n="compare_show">显示</button>
                            </div>
                        </div>

                        <div id="exposure-legend" class="comparison-legend" data-i18n="compare_legend">图例</div>
                    </div>
                    
                    <!-- 光刻胶厚度分布比较 -->
                    <div class="comparison-plot-container">
                        <h3 class="comparison-plot-title" data-i18n="compare_thick_dist">光刻胶厚度分布比较</h3>
                        <div id="thickness-comparison-plot-container" class="plot-container"></div>
                        <img id="thickness-comparison-plot" class="plot-image" style="display: none;" src="" alt="光刻胶厚度分布比较图">

                        <div class="individual-threshold-controls threshold-analysis-hint" id="thickness-thresholds-container">
                            <div class="threshold-control" data-idx="0">
                                <span class="threshold-label-text" data-i18n="compare_threshold">参数组 1 阈值:</span>
                                <input type="range" class="threshold-slider" min="0" max="1" step="0.01" value="0.3" title="参数组1厚度阈值滑块" aria-label="参数组1厚度阈值">
                                <span class="threshold-value-text">0.3</span>
                                <button class="toggle-threshold-visibility-btn" data-i18n="compare_show">显示</button>
                            </div>
                            <div class="threshold-control" data-idx="1">
                                <span class="threshold-label-text" data-i18n="compare_threshold">参数组 2 阈值:</span>
                                <input type="range" class="threshold-slider" min="0" max="1" step="0.01" value="0.5" title="参数组2厚度阈值滑块" aria-label="参数组2厚度阈值">
                                <span class="threshold-value-text">0.5</span>
                                <button class="toggle-threshold-visibility-btn" data-i18n="compare_show">显示</button>
                            </div>
                            <div class="threshold-control" data-idx="2">
                                <span class="threshold-label-text" data-i18n="compare_threshold">参数组 3 阈值:</span>
                                <input type="range" class="threshold-slider" min="0" max="1" step="0.01" value="0.7" title="参数组3厚度阈值滑块" aria-label="参数组3厚度阈值">
                                <span class="threshold-value-text">0.7</span>
                                <button class="toggle-threshold-visibility-btn" data-i18n="compare_show">显示</button>
                            </div>
                            <div class="threshold-control" data-idx="3">
                                <span class="threshold-label-text" data-i18n="compare_threshold">参数组 4 阈值:</span>
                                <input type="range" class="threshold-slider" min="0" max="1" step="0.01" value="0.4" title="参数组4厚度阈值滑块" aria-label="参数组4厚度阈值">
                                <span class="threshold-value-text">0.4</span>
                                <button class="toggle-threshold-visibility-btn" data-i18n="compare_show">显示</button>
                            </div>
                        </div>

                        <div id="thickness-legend" class="comparison-legend" data-i18n="compare_legend">图例</div>
                    </div>
                </div>
            </section>
        </div>
    </main>
    
    <!-- Dill模型参数组模板（隐藏，用于JavaScript克隆） -->
    <template id="dill-parameter-set-template">
        <div class="parameter-set" data-set-id="">
            <div class="parameter-set-header sticky">
                <button class="drag-handle-btn" data-i18n-title="drag_handle_title" aria-label="拖拽排序"><i class="fas fa-grip-lines"></i></button>
                <button class="collapse-set-btn" aria-label="折叠/展开" data-i18n-title="collapse_set_title"><i class="fas fa-chevron-down"></i></button>
                <div class="parameter-set-title-container">
                    <h3 class="parameter-set-title">参数组</h3>
                    <input type="text" class="parameter-set-name-input" placeholder="自定义名称" title="输入自定义名称" data-i18n="compare_template_placeholder" data-i18n-title="compare_set_placeholder_title">
                </div>
                <div class="parameter-set-controls">
                    <button class="parameter-set-control-btn" title="复制参数组" data-i18n-title="copy_set_title"><i class="fas fa-copy"></i></button>
                    <button class="parameter-set-control-btn remove-set-btn" title="删除参数组" data-i18n-title="remove_set_title"><i class="fas fa-trash"></i></button>
                </div>
            </div>
            
            <div class="parameters-grid">
                <!-- 参数1: I_avg -->
                <div class="parameter-item">
                    <div class="parameter-label">
                        <span class="parameter-name" data-i18n="avg_intensity">平均入射光强度 (I<sub>avg</sub>)</span>
                        <span class="parameter-value">10</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="slider I_avg" min="1" max="100" step="0.1" value="10">
                        <input type="number" class="number-input" value="10" min="1" max="100" step="0.1">
                    </div>
                </div>
                
                <!-- 参数2: V -->
                <div class="parameter-item">
                    <div class="parameter-label">
                        <span class="parameter-name" data-i18n="fringe_visibility">干涉条纹可见度 (V)</span>
                        <span class="parameter-value">0.8</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="slider V" min="0" max="1" step="0.01" value="0.8">
                        <input type="number" class="number-input" value="0.8" min="0" max="1" step="0.01">
                    </div>
                </div>
                
                <!-- 参数3: K -->
                <div class="parameter-item">
                    <div class="parameter-label">
                        <span class="parameter-name" data-i18n="spatial_freq">空间频率 (K)</span>
                        <span class="parameter-value">2</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="slider K" min="0.1" max="10" step="0.1" value="2">
                        <input type="number" class="number-input" value="2" min="0.1" max="10" step="0.1">
                    </div>
                </div>
                
                <!-- 参数4: t_exp -->
                <div class="parameter-item">
                    <div class="parameter-label">
                        <span class="parameter-name" data-i18n="exposure_time">曝光时间 (t<sub>exp</sub>)</span>
                        <span class="parameter-value">5</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="slider t_exp" min="0.1" max="20" step="0.1" value="5">
                        <input type="number" class="number-input" value="5" min="0.1" max="20" step="0.1">
                    </div>
                </div>
                
                <!-- 参数5: C -->
                <div class="parameter-item">
                    <div class="parameter-label">
                        <span class="parameter-name" data-i18n="dill_C">光敏速率常数 (C)</span>
                        <span class="parameter-value">0.02</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="slider C" min="0.001" max="0.1" step="0.001" value="0.02">
                        <input type="number" class="number-input" value="0.02" min="0.001" max="0.1" step="0.001">
                    </div>
                </div>
                <!-- phi_expr参数输入区（多维正弦波时显示） -->
                <div class="parameter-item phi-expr-item" style="display:none;">
                    <div class="parameter-label">
                        <span class="parameter-name">φ(t) (相位表达式)</span>
                    </div>
                    <div class="parameter-input">
                        <input type="text" class="phi-expr-input" value="0">
                    </div>
                    <div class="phi-expr-hint" style="color:#888;font-size:0.95em;">示例：0, pi/2, sin(2*t)，支持sin/cos/pi/t等</div>
                    <div class="phi-expr-error" style="color:#d00;font-size:0.95em;display:none;"></div>
                    <button class="phi-expr-preview-btn" style="margin-top:4px;display:none;">预览分布</button>
                    <div class="phi-expr-preview-plot" style="margin-top:8px;display:none;"></div>
                </div>
            </div>
        </div>
    </template>
    
    <!-- 增强Dill模型参数组模板 -->
    <template id="enhanced-dill-parameter-set-template">
        <div class="parameter-set" data-set-id="">
            <div class="parameter-set-header sticky">
                <button class="drag-handle-btn" data-i18n-title="drag_handle_title" aria-label="拖拽排序"><i class="fas fa-grip-lines"></i></button>
                <div class="parameter-set-title-container">
                    <h3 class="parameter-set-title">参数组</h3>
                    <input type="text" class="parameter-set-name-input" placeholder="自定义名称" title="输入自定义名称" data-i18n="compare_template_placeholder" data-i18n-title="compare_set_placeholder_title">
                </div>
                <div class="parameter-set-controls">
                    <button class="parameter-set-control-btn" title="复制参数组" data-i18n-title="copy_set_title"><i class="fas fa-copy"></i></button>
                    <button class="parameter-set-control-btn remove-set-btn" title="删除参数组" data-i18n-title="remove_set_title"><i class="fas fa-trash"></i></button>
                </div>
            </div>
            
            <div class="parameters-grid">
                <div class="parameter-item">
                    <div class="parameter-label">
                        <span class="parameter-name" data-i18n="z_h">胶厚 (z<sub>h</sub>, μm)</span>
                        <span class="parameter-value">10</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="slider z_h" min="1" max="50" step="0.1" value="10">
                        <input type="number" class="number-input" value="10" min="1" max="50" step="0.1">
                    </div>
                </div>
                
                <div class="parameter-item">
                    <div class="parameter-label">
                        <span class="parameter-name" data-i18n="T">前烘温度 (T, ℃)</span>
                        <span class="parameter-value">100</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="slider T" min="60" max="150" step="1" value="100">
                        <input type="number" class="number-input" value="100" min="60" max="150" step="1">
                    </div>
                </div>
                
                <div class="parameter-item">
                    <div class="parameter-label">
                        <span class="parameter-name" data-i18n="t_B">前烘时间 (t<sub>B</sub>, min)</span>
                        <span class="parameter-value">10</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="slider t_B" min="1" max="60" step="1" value="10">
                        <input type="number" class="number-input" value="10" min="1" max="60" step="1">
                    </div>
                </div>
                
                <div class="parameter-item">
                    <div class="parameter-label">
                        <span class="parameter-name" data-i18n="I0">初始光强 (I0)</span>
                        <span class="parameter-value">1.0</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="slider I0" min="0.1" max="2" step="0.01" value="1.0">
                        <input type="number" class="number-input" value="1.0" min="0.1" max="2" step="0.01">
                    </div>
                </div>
                
                <div class="parameter-item">
                    <div class="parameter-label">
                        <span class="parameter-name" data-i18n="M0">初始PAC浓度 (M0)</span>
                        <span class="parameter-value">1.0</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="slider M0" min="0.1" max="1.0" step="0.01" value="1.0">
                        <input type="number" class="number-input" value="1.0" min="0.1" max="1.0" step="0.01">
                    </div>
                </div>
                
                <div class="parameter-item">
                    <div class="parameter-label">
                        <span class="parameter-name" data-i18n="t_exp_enhanced">曝光时间 (t<sub>exp</sub>, s)</span>
                        <span class="parameter-value">5</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="slider t_exp_enhanced" min="0.1" max="60" step="0.1" value="5">
                        <input type="number" class="number-input" value="5" min="0.1" max="60" step="0.1">
                    </div>
                </div>
                <div class="parameter-item">
                    <div class="parameter-label">
                        <span class="parameter-name" data-i18n="spatial_freq">空间频率 (K)</span>
                        <span class="parameter-value">2</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="slider K_enhanced" min="0.1" max="10" step="0.1" value="2">
                        <input type="number" class="number-input" value="2" min="0.1" max="10" step="0.1">
                    </div>
                    <div class="parameter-description" data-i18n="param_desc_K"></div>
                </div>
                
                <div class="parameter-item">
                    <div class="parameter-label">
                        <span class="parameter-name" data-i18n="fringe_visibility">干涉条纹可见度 (V)</span>
                        <span class="parameter-value">0.8</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="slider V_enhanced" min="0" max="1" step="0.01" value="0.8">
                        <input type="number" class="number-input" value="0.8" min="0" max="1" step="0.01">
                    </div>
                    <div class="parameter-description" data-i18n="param_desc_V"></div>
                </div>
            </div>
        </div>
    </template>
    
    <!-- CAR模型参数组模板 -->
    <template id="car-parameter-set-template">
        <div class="parameter-set" data-set-id="">
            <div class="parameter-set-header sticky">
                <button class="drag-handle-btn" data-i18n-title="drag_handle_title" aria-label="拖拽排序"><i class="fas fa-grip-lines"></i></button>
                <div class="parameter-set-title-container">
                    <h3 class="parameter-set-title">参数组</h3>
                    <input type="text" class="parameter-set-name-input" placeholder="自定义名称" title="输入自定义名称" data-i18n="compare_template_placeholder" data-i18n-title="compare_set_placeholder_title">
                </div>
                <div class="parameter-set-controls">
                    <button class="parameter-set-control-btn" title="复制参数组" data-i18n-title="copy_set_title"><i class="fas fa-copy"></i></button>
                    <button class="parameter-set-control-btn remove-set-btn" title="删除参数组" data-i18n-title="remove_set_title"><i class="fas fa-trash"></i></button>
                </div>
            </div>
            <div class="parameters-grid">
                <div class="parameter-item">
                    <div class="parameter-label"><span class="parameter-name" data-i18n="avg_intensity">平均入射光强度 (I<sub>avg</sub>)</span><span class="parameter-value">10</span></div>
                    <div class="parameter-input"><input type="range" class="slider car_I_avg" min="1" max="100" step="0.1" value="10"><input type="number" class="number-input" value="10" min="1" max="100" step="0.1"></div>
                </div>
                <div class="parameter-item">
                    <div class="parameter-label"><span class="parameter-name" data-i18n="fringe_visibility">干涉条纹可见度 (V)</span><span class="parameter-value">0.8</span></div>
                    <div class="parameter-input"><input type="range" class="slider car_V" min="0" max="1" step="0.01" value="0.8"><input type="number" class="number-input" value="0.8" min="0" max="1" step="0.01"></div>
                </div>
                <div class="parameter-item">
                    <div class="parameter-label"><span class="parameter-name" data-i18n="spatial_freq">空间频率 (K)</span><span class="parameter-value">2</span></div>
                    <div class="parameter-input"><input type="range" class="slider car_K" min="0.1" max="10" step="0.1" value="2"><input type="number" class="number-input" value="2" min="0.1" max="10" step="0.1"></div>
                </div>
                <div class="parameter-item">
                    <div class="parameter-label"><span class="parameter-name" data-i18n="exposure_time">曝光时间 (t<sub>exp</sub>)</span><span class="parameter-value">5</span></div>
                    <div class="parameter-input"><input type="range" class="slider car_t_exp" min="0.1" max="20" step="0.1" value="5"><input type="number" class="number-input" value="5" min="0.1" max="20" step="0.1"></div>
                </div>
                <div class="parameter-item">
                    <div class="parameter-label"><span class="parameter-name" data-i18n="car_acid_gen_efficiency">光酸产生效率 (η)</span><span class="parameter-value">0.5</span></div>
                    <div class="parameter-input"><input type="range" class="slider car_acid_gen_efficiency" min="0.01" max="1" step="0.01" value="0.5"><input type="number" class="number-input" value="0.5" min="0.01" max="1" step="0.01"></div>
                </div>
                <div class="parameter-item">
                    <div class="parameter-label"><span class="parameter-name" data-i18n="car_diffusion_length">扩散长度 (EPDL)</span><span class="parameter-value">3</span></div>
                    <div class="parameter-input"><input type="range" class="slider car_diffusion_length" min="0" max="20" step="0.1" value="3"><input type="number" class="number-input" value="3" min="0" max="20" step="0.1"></div>
                </div>
                <div class="parameter-item">
                    <div class="parameter-label"><span class="parameter-name" data-i18n="car_reaction_rate">反应速率常数 (k)</span><span class="parameter-value">0.3</span></div>
                    <div class="parameter-input"><input type="range" class="slider car_reaction_rate" min="0.01" max="1" step="0.01" value="0.3"><input type="number" class="number-input" value="0.3" min="0.01" max="1" step="0.01"></div>
                </div>
                <div class="parameter-item">
                    <div class="parameter-label"><span class="parameter-name" data-i18n="car_amplification">放大因子 (A)</span><span class="parameter-value">10</span></div>
                    <div class="parameter-input"><input type="range" class="slider car_amplification" min="1" max="50" step="0.5" value="10"><input type="number" class="number-input" value="10" min="1" max="50" step="0.5"></div>
                </div>
                <div class="parameter-item">
                    <div class="parameter-label"><span class="parameter-name" data-i18n="car_contrast">对比度因子 (γ)</span><span class="parameter-value">3</span></div>
                    <div class="parameter-input"><input type="range" class="slider car_contrast" min="0.1" max="10" step="0.1" value="3"><input type="number" class="number-input" value="3" min="0.1" max="10" step="0.1"></div>
                </div>
            </div>
        </div>
    </template>
    
    <!-- 结果区为CAR模型预留展示区域 -->
    <div id="car-comparison-results" style="display:none;">
        <h3 data-i18n="compare_car_result_title">CAR模型结果对比（支持多组参数）</h3>
        <div id="car-comparison-plot-container" class="plot-container"></div>
    </div>
    
    <!-- 页面底部，浮动操作栏加sticky类 -->
    <div id="mobile-fab-bar" class="mobile-fab-bar sticky-bottom">
        <button class="fab-btn add-set-fab" data-i18n="add_set" aria-label="新增参数组"><i class="fas fa-plus"></i></button>
        <button class="fab-btn calc-fab" data-i18n="calculate" aria-label="一键计算"><i class="fas fa-calculator"></i></button>
    </div>
    
    <!-- 弹窗结构，支持滑动关闭 -->
    <div id="compare-modal" class="modal swipe-close-modal" aria-modal="true" role="dialog">
        <div id="compare-modal-content" class="modal-content">
            <!-- 弹窗内容 -->
        </div>
    </div>
    
    <!-- 日志查看弹窗 -->
    <div id="logs-modal" class="modal" aria-modal="true" role="dialog">
        <div class="modal-content logs-modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-file-alt"></i> 计算运行日志
                </h3>
                <div class="modal-controls">
                    <select id="log-model-filter" class="log-filter-select" title="过滤模型类型" aria-label="过滤模型类型">
                        <option value="">所有模型</option>
                        <option value="dill">Dill模型</option>
                        <option value="enhanced_dill">Enhanced Dill模型</option>
                        <option value="car">CAR模型</option>
                        <option value="system">系统</option>
                    </select>
                    <button id="refresh-logs-btn" class="log-control-btn" title="刷新日志">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                    <button id="clear-logs-btn" class="log-control-btn" title="清空日志">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button id="close-logs-modal" class="close-modal-btn" title="关闭">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="modal-body">
                <div id="logs-container" class="logs-container">
                    <div class="logs-loading">
                        <i class="fas fa-spinner fa-spin"></i> 加载日志中...
                    </div>
                </div>
                <div class="logs-stats">
                    <span id="logs-count-info" class="logs-count">总计: 0 条日志</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 引入JavaScript文件 -->
    <script src="js/common.js?v=1.0"></script>
    <script src="js/compare.js"></script>
    <script src="js/logs-manager.js"></script>
    <script src="js/lang.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // 设置主题颜色函数
        function applyThemeColor(modelType) {
            // 首先移除所有主题类
            document.body.classList.remove('theme-dill', 'theme-enhanced-dill', 'theme-car');
            
            // 然后添加选中的主题类
            if (modelType === 'dill') {
                document.body.classList.add('theme-dill');
            } else if (modelType === 'enhanced_dill') {
                document.body.classList.add('theme-enhanced-dill');
            } else if (modelType === 'car') {
                document.body.classList.add('theme-car');
            }
        }
        
        // 获取模型选择下拉框
        const modelSelect = document.getElementById('model-select');
        
        // 初始化应用默认主题
        applyThemeColor(modelSelect.value);
        
        // 添加模型切换事件监听器
        modelSelect.addEventListener('change', function() {
            applyThemeColor(this.value);
            
            // 切换模型描述显示
            document.querySelectorAll('#model-description-container > div').forEach(div => {
                div.style.display = 'none';
            });
            
            if (this.value === 'dill') {
                document.getElementById('dill-desc').style.display = 'block';
            } else if (this.value === 'enhanced_dill') {
                document.getElementById('enhanced-dill-desc').style.display = 'block';
            } else if (this.value === 'car') {
                document.getElementById('car-desc').style.display = 'block';
            }
        });
    });
    </script>
    
    <!-- 页脚 -->
    <footer class="professional-footer">
        <div class="footer-main">
            <div class="footer-content">
                <div class="footer-section company-section">
                    <div class="footer-logo">
                        <i class="fas fa-atom"></i>
                        <span data-i18n="footer_brand">光刻胶建模平台</span>
                    </div>
                    <p class="footer-description" data-i18n="footer_desc">
                        基于先进的数学模型和计算方法，为半导体制造业提供专业的光刻胶建模与仿真解决方案。
                    </p>
                    <div class="footer-badges">
                        <span class="badge" data-i18n="badge_research">科研级</span>
                        <span class="badge" data-i18n="badge_professional">专业版</span>
                        <span class="badge" data-i18n="badge_verified">已验证</span>
                    </div>
                    
                    <!-- 添加页脚LOGO区域 - 放在徽章下方 -->
                    <div class="footer-logos">
                        <img src="assets/images/LOGO.avif" alt="香港大学校徽" class="footer-university-logo" title="香港大学">
                        <img src="assets/images/Dept new logo.avif" alt="学院LOGO" class="footer-department-logo" title="机械工程系">
                    </div>
                </div>
                <div class="footer-section links-section">
                    <h4 class="footer-title" data-i18n="footer_platform">平台功能</h4>
                    <ul class="footer-links">
                        <li><a href="index.html" data-i18n="footer_single">单一模型计算</a></li>
                        <li><a href="compare.html" data-i18n="footer_compare">参数对比分析</a></li>
                        <li><a href="../matrix_visualization/" data-i18n="footer_matrix">矩阵可视化</a></li>
                        <li><a href="#" data-i18n="footer_documentation">使用文档</a></li>
                    </ul>
                </div>
                <div class="footer-section models-section">
                    <h4 class="footer-title" data-i18n="footer_models">支持模型</h4>
                    <ul class="footer-links">
                        <li><span class="model-badge dill">Dill</span> <span data-i18n="footer_dill">薄胶模型</span></li>
                        <li><span class="model-badge enhanced">Enhanced</span> <span data-i18n="footer_enhanced">厚胶模型</span></li>
                        <li><span class="model-badge car">CAR</span> <span data-i18n="footer_car">化学放大模型</span></li>
                        <li><span class="model-badge custom">Custom</span> <span data-i18n="footer_custom">自定义模型</span></li>
                    </ul>
                </div>
                <div class="footer-section contact-section">
                    <h4 class="footer-title" data-i18n="footer_contact">联系我们</h4>
                    <div class="contact-info">
                        <div class="contact-item">
                            <i class="fas fa-university"></i>
                            <span data-i18n="footer_university">香港大学</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-envelope"></i>
                            <span>mech@hku.hk</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-phone"></i>
                            <span>Tel: (852) 3917 2635</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-fax"></i>
                            <span>Fax: (852) 2858 5415</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-globe-asia"></i>
                            <a href="https://mech.hku.hk/" target="_blank" rel="noopener" style="color: inherit; text-decoration: none;">mech.hku.hk</a>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-code-branch"></i>
                            <span data-i18n="footer_version">版本 v2.1.0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="footer-bottom-content">
                <div class="copyright">
                    <p>&copy; 2025 <strong data-i18n="footer_copyright_org">香港大学光刻胶建模研究中心</strong>. <span data-i18n="footer_rights">保留所有权利</span>.</p>
                </div>
                <div class="footer-meta">
                    <a href="https://mech.hku.hk/blank" target="_blank" rel="noopener" class="footer-link" data-i18n="footer_privacy">隐私政策</a>
                    <span class="footer-separator">|</span>
                    <a href="https://mech.hku.hk/safety" target="_blank" rel="noopener" class="footer-link" data-i18n="footer_terms">安全政策</a>
                    <span class="footer-separator">|</span>
                    <a href="#" class="footer-link" data-i18n="footer_support">技术支持</a>
                </div>
            </div>
        </div>
    </footer>
</body>
</html> 