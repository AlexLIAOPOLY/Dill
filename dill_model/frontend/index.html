<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>模型计算工具</title>
    <!-- 引入Google字体 -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- 引入样式文件 -->
    <link rel="stylesheet" href="css/style.css?v=1.1">
    <link rel="stylesheet" href="css/animations.css?v=1.1">
    <link rel="stylesheet" href="css/popup-enhanced.css?v=1.0">
    <!-- 引入Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-2.25.2.min.js"></script>
</head>
<body>
    <!-- 加载动画 -->
    <div id="loading" class="loading">
        <div class="spinner"></div>
    </div>
    
    <!-- 页头 -->
    <header>
        <div class="header-content">
            <div class="logo"><span>模型</span>计算工具</div>
            <nav class="main-nav">
                <ul>
                    <li><a href="welcome.html">使用指南</a></li>
                    <li class="active"><a href="index.html">单一计算</a></li>
                    <li><a href="compare.html">参数比较</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <!-- 主要内容 -->
    <main class="main-content">
        <div class="container">
            <!-- 错误消息 -->
            <div id="error-message" class="error-message"></div>

            <!-- 模型选择与公式展示区域 -->
            <section id="model-selection-section" class="model-selection-section">
                <h2 class="section-title">模型选择与说明</h2>
                <div class="model-selector-container">
                    <label for="model-select" class="model-select-label">选择计算模型:</label>
                    <select id="model-select" class="model-select">
                        <option value="dill" selected>Dill模型</option>
                        <!-- 未来可在此处添加更多模型选项 -->
                        <!-- <option value="model_x">其他模型X</option> -->
                    </select>
                </div>

                <div id="model-description-container" class="model-description-container">
                    <h3 class="model-description-title">Dill模型</h3>
                    <div class="model-core-formula">
                        <p>核心关系: <code>M(x,z) = exp(-C &middot; D(x,z))</code></p>
                        <p class="formula-notation"><em>M: 归一化光敏剂浓度, C: 光敏速率常数, D: 曝光剂量</em></p>
                    </div>
                    <button id="toggle-model-details-btn" class="toggle-details-btn">显示详细说明</button>
                    
                    <div id="model-full-details" class="model-full-details">
                        <h4>模型简介：</h4>
                        <p>Dill模型是描述光刻胶曝光过程的经典模型，核心在于光敏剂浓度随时间和空间的变化及其对光刻胶溶解速率的影响。</p>
                        
                        <h4>主要参数：</h4>
                        <ul>
                            <li><b>Dill A, B (cm<sup>-1</sup>)</b>: 光刻胶的吸收系数，分别描述曝光引发的吸收变化和固有吸收。</li>
                            <li><b>Dill C (cm<sup>2</sup>/mJ)</b>: 光刻胶的光敏速率常数，表征曝光效率。</li>
                            <li><b>用户输入参数</b>: 
                                <ul>
                                    <li>I<sub>avg</sub> (平均入射光强度)</li>
                                    <li>V (干涉条纹可见度)</li>
                                    <li>K (空间频率)</li>
                                    <li>t<sub>exp</sub> (曝光时间)</li>
                                </ul>
                            </li>
                        </ul>

                        <h4>关键方程回顾：</h4>
                        <p>1. 光敏剂浓度变化率 (曝光动力学):</p>
                        <div class="formula-math">
                            <p><code>&part;M(x,z,t) / &part;t = -C &middot; I(x,z,t) &middot; M(x,z,t)</code></p>
                        </div>
                        <p>2. 光强衰减 (修正Beer-Lambert):</p>
                        <div class="formula-math">
                            <p><code>&part;I(x,z,t) / &part;z = - (A &middot; M(x,z,t) + B) &middot; I(x,z,t)</code></p>
                        </div>
                        <p>通过这些方程，结合用户输入的参数计算光强分布 I(x,0) 和曝光剂量 D(x,z)，最终利用上述核心关系得到 M(x,z)，进而预测光刻胶的形貌。</p>
                        <p><b>注:</b> 此为简化说明。完整模型及实际应用可能包含更复杂的因素，如反射、显影过程等。</p>
                    </div>
                </div>
            </section>
            
            <!-- 参数输入区域 -->
            <section class="parameters-section">
                <h2 class="section-title">参数设置</h2>
                
                <div class="parameters-grid">
                    <!-- 参数1: I_avg -->
                    <div class="parameter-item slider-fill">
                        <div class="parameter-label">
                            <span class="parameter-name">平均入射光强度 (I<sub>avg</sub>)</span>
                            <span class="parameter-value">10</span>
                        </div>
                        <div class="parameter-input">
                            <input type="range" id="I_avg" class="slider" min="1" max="100" step="0.1" value="10">
                            <input type="number" class="number-input" value="10" min="1" max="100" step="0.1">
                        </div>
                        <div class="parameter-description">平均入射光强度，单位：mW/cm²</div>
                    </div>
                    
                    <!-- 参数2: V -->
                    <div class="parameter-item slider-fill">
                        <div class="parameter-label">
                            <span class="parameter-name">干涉条纹可见度 (V)</span>
                            <span class="parameter-value">0.8</span>
                        </div>
                        <div class="parameter-input">
                            <input type="range" id="V" class="slider" min="0" max="1" step="0.01" value="0.8">
                            <input type="number" class="number-input" value="0.8" min="0" max="1" step="0.01">
                        </div>
                        <div class="parameter-description">干涉条纹的对比度，范围：0-1</div>
                    </div>
                    
                    <!-- 参数3: K -->
                    <div class="parameter-item slider-fill">
                        <div class="parameter-label">
                            <span class="parameter-name">空间频率 (K)</span>
                            <span class="parameter-value">2</span>
                        </div>
                        <div class="parameter-input">
                            <input type="range" id="K" class="slider" min="0.1" max="10" step="0.1" value="2">
                            <input type="number" class="number-input" value="2" min="0.1" max="10" step="0.1">
                        </div>
                        <div class="parameter-description">干涉条纹的空间频率，单位：rad/μm</div>
                    </div>
                    
                    <!-- 参数4: t_exp -->
                    <div class="parameter-item slider-fill">
                        <div class="parameter-label">
                            <span class="parameter-name">曝光时间 (t<sub>exp</sub>)</span>
                            <span class="parameter-value">5</span>
                        </div>
                        <div class="parameter-input">
                            <input type="range" id="t_exp" class="slider" min="0.1" max="20" step="0.1" value="5">
                            <input type="number" class="number-input" value="5" min="0.1" max="20" step="0.1">
                        </div>
                        <div class="parameter-description">总曝光时间，单位：秒</div>
                    </div>
                    
                    <!-- 参数5: C -->
                    <div class="parameter-item slider-fill">
                        <div class="parameter-label">
                            <span class="parameter-name">光敏速率常数 (C)</span>
                            <span class="parameter-value">0.02</span>
                        </div>
                        <div class="parameter-input">
                            <input type="range" id="C" class="slider" min="0.001" max="0.1" step="0.001" value="0.02">
                            <input type="number" class="number-input" value="0.02" min="0.001" max="0.1" step="0.001">
                        </div>
                        <div class="parameter-description">光刻胶的Dill C参数，单位：cm²/mJ</div>
                    </div>
                </div>
                
                <div class="button-container">
                    <button id="calculate-btn" class="calculate-btn">计算</button>
                </div>
            </section>
            
            <!-- 结果展示区域 -->
            <section id="results-section" class="results-section">
                <h2 class="section-title">计算结果</h2>
                
                <div class="plots-container">
                    <!-- 曝光剂量分布图 -->
                    <div class="plot-item">
                        <h3 class="plot-title">曝光剂量分布</h3>
                        <div id="exposure-plot-container" class="plot-container"></div>
                        <!-- 保留原有图像作为后备 -->
                        <img id="exposure-plot" class="plot-image" style="display: none;" src="" alt="曝光剂量分布图">
                    </div>
                    
                    <!-- 光刻胶厚度分布图 -->
                    <div class="plot-item">
                        <h3 class="plot-title">光刻胶厚度分布</h3>
                        <div id="thickness-plot-container" class="plot-container"></div>
                        <!-- 保留原有图像作为后备 -->
                        <img id="thickness-plot" class="plot-image" style="display: none;" src="" alt="光刻胶厚度分布图">
                    </div>
                </div>
            </section>
        </div>
    </main>
    
    <!-- 页脚 -->
    <footer>
        <div class="footer-content">
            <p>&copy; 2025 香港大学 版权所有.</p>
        </div>
    </footer>
    
    <!-- 引入JavaScript文件 -->
    <script src="js/common.js?v=1.0"></script>
    <script src="js/main.js"></script>
</body>
</html> 